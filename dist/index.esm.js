import e from"@babel/runtime-corejs3/helpers/classCallCheck";import r from"@babel/runtime-corejs3/helpers/createClass";import t from"@babel/runtime-corejs3/helpers/defineProperty";import n from"@babel/runtime-corejs3/core-js-stable/object/keys";import i from"@babel/runtime-corejs3/core-js-stable/object/create";import s from"@babel/runtime-corejs3/core-js-stable/instance/concat";import o from"@babel/runtime-corejs3/core-js-stable/instance/for-each";import a from"@babel/runtime-corejs3/core-js-stable/instance/filter";var l=function(e){return"[object Function]"===Object.prototype.toString.call(e)},c=function(e){return"[object String]"===Object.prototype.toString.call(e)},u=function(){function u(){e(this,u),t(this,"_listeners",void 0),this._listeners=i(null)}return r(u,[{key:"on",value:function(e,r){if("production"!==process.env.NODE_ENV){if(!c(e))throw new TypeError("Parameter 1 is not a string");if(!l(r))throw new TypeError("Parameter 2 is not a function")}(this._listeners[e]||(this._listeners[e]=[])).push(r);var t=this;return function(){r.__onceListener__||t.off(e,r)}}},{key:"once",value:function(e,r){if("production"!==process.env.NODE_ENV){if(!c(e))throw new TypeError("Parameter 1 is not a string");if(!l(r))throw new TypeError("Parameter 2 is not a function")}var t=function t(){for(var n,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r.call.apply(r,s(n=[r]).call(n,o)),this.off(e,t)};t.__onceListener__=r,this.on(e,t)}},{key:"emit",value:function(e){for(var r,t=this,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if("production"!==process.env.NODE_ENV&&!c(e))throw new TypeError("Parameter 1 is not a string");this._listeners[e]&&this._listeners[e].length&&o(r=this._listeners[e]).call(r,(function(e){var r;e.call.apply(e,s(r=[t]).call(r,i))}));return this}},{key:"off",value:function(e,r){if("production"!==process.env.NODE_ENV){if(!c(e))throw new TypeError("Parameter 1 is not a string");if(!l(r))throw new TypeError("Parameter 2 is not a function")}var t;this._listeners[e]&&this._listeners[e].length&&(this._listeners[e]=a(t=this._listeners[e]).call(t,(function(e){return e!==r&&e.__onceListener__!==r})));return this}},{key:"offAll",value:function(e){if(!e)return this._listeners=i(null),this;if("production"!==process.env.NODE_ENV&&!c(e))throw new TypeError("Parameter 1 is not a string");var r;return this._listeners[e]&&delete this._listeners[e],(r=this._listeners)&&0===n(r).length&&r.constructor===Object&&(this._listeners=i(null)),this}},{key:"has",value:function(e){if("production"!==process.env.NODE_ENV&&!c(e))throw new TypeError("Parameter 1 is not a string");return this._listeners[e]&&this._listeners[e].length>0}}]),u}();export{u as default};
